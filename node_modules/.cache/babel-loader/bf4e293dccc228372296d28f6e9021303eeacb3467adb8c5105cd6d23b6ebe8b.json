{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, normalizeStyle as _normalizeStyle, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"wrap\"\n};\nconst _hoisted_2 = {\n  class: \"header\"\n};\nconst _hoisted_3 = /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"header_title\"\n}, [/*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"header_title_down\"\n}, \"결제하기\")], -1 /* HOISTED */);\nconst _hoisted_4 = {\n  class: \"confirmpayment_container\"\n};\nconst _hoisted_5 = /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"confirmpayment_area\"\n}, null, -1 /* HOISTED */);\nconst _hoisted_6 = {\n  class: \"confirmpayment_sum_area\"\n};\nconst _hoisted_7 = {\n  class: \"confirmpayment_signpad_area\"\n};\nconst _hoisted_8 = {\n  class: \"confirmpayment_signpad\"\n};\nconst _hoisted_9 = [\"width\", \"height\"];\nconst _hoisted_10 = {\n  class: \"confirmpayment_btn_area\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", null, [_createElementVNode(\"div\", _hoisted_1, [_createCommentVNode(\" ======== 카테고리 헤더 ======== \"), _createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", {\n    class: \"main_logo\",\n    onClick: _cache[0] || (_cache[0] = (...args) => $options.goHome && $options.goHome(...args))\n  }), _hoisted_3, _createElementVNode(\"div\", {\n    class: \"back\",\n    onClick: _cache[1] || (_cache[1] = (...args) => $options.goBack && $options.goBack(...args))\n  })]), _createCommentVNode(\" ======== 내용 나오는곳 ======== \"), _createElementVNode(\"div\", _hoisted_4, [_hoisted_5, _createElementVNode(\"div\", _hoisted_6, _toDisplayString($data.amount), 1 /* TEXT */), _createElementVNode(\"div\", _hoisted_7, [_createElementVNode(\"div\", _hoisted_8, [_createElementVNode(\"canvas\", {\n    ref: \"canvasPad\",\n    style: _normalizeStyle({\n      border: $data.localOptions.border\n    }),\n    width: $data.localOptions.width,\n    height: $data.localOptions.height,\n    onTouchstart: _cache[2] || (_cache[2] = (...args) => $options.onStart && $options.onStart(...args)),\n    onTouchend: _cache[3] || (_cache[3] = (...args) => $options.onEnd && $options.onEnd(...args)),\n    onTouchmove: _cache[4] || (_cache[4] = (...args) => $options.onMove && $options.onMove(...args)),\n    onMousedown: _cache[5] || (_cache[5] = (...args) => $options.onStart && $options.onStart(...args)),\n    onMouseup: _cache[6] || (_cache[6] = (...args) => $options.onEnd && $options.onEnd(...args)),\n    onMousemove: _cache[7] || (_cache[7] = (...args) => $options.onMove && $options.onMove(...args))\n  }, null, 44 /* STYLE, PROPS, NEED_HYDRATION */, _hoisted_9)]), _createElementVNode(\"div\", {\n    class: \"confirmpayment_signpad_img\",\n    onClick: _cache[8] || (_cache[8] = (...args) => $options.clear && $options.clear(...args))\n  })])]), _createCommentVNode(\"container끝\"), _createElementVNode(\"div\", _hoisted_10, [_createElementVNode(\"div\", {\n    class: \"confirmpayment_btn\",\n    onClick: _cache[9] || (_cache[9] = (...args) => _ctx.goPrintTag && _ctx.goPrintTag(...args))\n  })])]), _createCommentVNode(\"wrap 끝\")]);\n}","map":{"version":3,"names":["class","_createElementVNode","_createElementBlock","_hoisted_1","_createCommentVNode","_hoisted_2","onClick","_cache","args","$options","goHome","_hoisted_3","goBack","_hoisted_4","_hoisted_5","_hoisted_6","_toDisplayString","$data","amount","_hoisted_7","_hoisted_8","ref","style","_normalizeStyle","border","localOptions","width","height","onTouchstart","onStart","onTouchend","onEnd","onTouchmove","onMove","onMousedown","onMouseup","onMousemove","_hoisted_9","clear","_hoisted_10","_ctx","goPrintTag"],"sources":["D:\\0610\\1020_KoreaPost\\1.Receipto\\Receiptor\\src\\views\\payment\\ConfirmPayment.vue"],"sourcesContent":["<template>\n    <div>\n        <div class=\"wrap\">\n\n            <!-- ======== 카테고리 헤더 ======== -->\n            <div class=\"header\">\n                <div class=\"main_logo\" v-on:click=\"goHome\"></div>\n                <div class=\"header_title\">\n                    <div class=\"header_title_down\">결제하기</div>    \n                </div>\n                <div class=\"back\"  v-on:click=\"goBack\"></div>    \n            </div>\n\n            <!-- ======== 내용 나오는곳 ======== -->\n            <div class=\"confirmpayment_container\">\n                <div class=\"confirmpayment_area\">\n                </div>\n\n                <div class=\"confirmpayment_sum_area\">{{ amount }}\n                </div>\n                \n                <div class=\"confirmpayment_signpad_area\">\n                    <div class=\"confirmpayment_signpad\">\n                        <canvas ref=\"canvasPad\" \n                            v-bind:style=\"{border: localOptions.border}\"\n                            v-bind:width=\"localOptions.width\"\n                            v-bind:height=\"localOptions.height\"\n                            @touchstart=\"onStart\" @touchend=\"onEnd\" @touchmove=\"onMove\" \n                            @mousedown=\"onStart\" @mouseup=\"onEnd\" @mousemove=\"onMove\">\n                        </canvas>\n                    </div>\n                    <div class=\"confirmpayment_signpad_img\" v-on:click=\"clear\"></div>\n                </div>\n\n            </div><!--container끝-->\n\n            <div class=\"confirmpayment_btn_area\">\n                <div class=\"confirmpayment_btn\" v-on:click=\"goPrintTag\"></div>\n            </div>\n\n        </div><!--wrap 끝-->\n\n    </div>\n</template>\n\n<script>\nimport '@/assets/css/payment/confirmpayment.css';\nimport dayjs from \"dayjs\";\nimport axios from 'axios';\nimport json_log from \"@/assets/json/log.json\";\n\nexport default {\n    name: \"ConfirmPayment\",\n    props: ['options'], // {width, height, border, lineColor, lineWidth, functions:{download: boolean, ...}}\n    data () {\n        return {\n            localOptions: {},\n            isDrawing: false,\n            fileName: 'signpad',\n            canvasPad: {},\n            canvasPadContext: {},\n            currentPosition: { x: 0, y: 0 },\n            previousPosition: { x: 0, y: 0 },\n            amount :0,\n\n        }\n    },\n\n    components: {\n    },\n    methods: {\n        goBack(){\n            this.$router.go(-1);\n        },\n        goHome(){\n            this.$router.push('/');\n        },\n        goAddTag(){\n            this.$router.push('/addtag');\n        },\n        // 결제하기\n        goPayment(){\n            const apiUrl = \"http://localhost:8686/REQ_CMD\";\n            const currentTime = dayjs().format('YYYY-MM-DD HH:mm:ss'); // 현재날짜 + 시각\n            const payAmount = String(this.amount).padStart(12, \"0\");\n\n            const datas = '99' + currentTime + payAmount + '0000000000' + '0' + 'YY';\n            axios({\n                method: 'get', \n                url: apiUrl,\n                headers: { \"Content-Type\": \"application/json; charset=utf-8\" }, \n                params: {cmd : \"156\", senddata : datas},\n                responseType: 'json'\n            }).then(response => {\n\n            //나주 개발망 ====  pos -> 웹서버 -> 나주 JSP : 결제처리\n                console.log(response.data);\n                axios({\n                    method: 'post',\n                    //url: \"http://testkpl.koreapost.go.kr/autoPost/SaveMCnterRecevListMultiple.jsp\",\n                    url: \"http://118.217.181.132/autoPost/SaveMCnterRecevListMultiple.php\",\n                    timeout : 30000, \n                    headers: {\n                            \"Content-Type\": \"application/x-www-form-urlencoded\"\n                        }, \n                    //data:trans_data\n                   /// data:sendData2\n                })\n                .then(function(response) {\n                    if (response.status === 200) {\n                        const responseBody = response.data;\n                        console.log(responseBody);\n\n                            /*\n                            var xmlData = $(responseBody).find(\"list\");\n                            var listLength = xmlData.length;\n                            console.log(listLength);\n                            var htmlStr = \"\";\n                            var cntNum = 0;\n                            if(listLength){\n                                htmlStr += \"<table id='addr' style='border-collapse: collapse'>\";\n                                $(xmlData).each(function(){\n                                    // constentStr += (this).find(\"CITYDIVNM\").text();\n                                    if($(this).find(\"sendPrsnZipCd\").text() !== \"\"){\n                                        console.log($(this).find(\"sendPrsnZipCd\").text() + \" \"+ $(this).find(\"sendPrsnAddr\").text() + \" \"+ $(this).find(\"sendPrsnDtailAddr\").text() \n                                        + \" \"+ $(this).find(\"sendPrsnNm\").text()+ \" \"+ $(this).find(\"sendPrsnHTelFno\").text()+ \" \"+ $(this).find(\"sendPrsnHTelMno\").text()+ \" \"+ $(this).find(\"sendPrsnHTelLno\").text()\n                                        + \" \"+ $(this).find(\"sendPrsnTelFno\").text()+ \" \"+ $(this).find(\"sendPrsnTelMno\").text()+ \" \"+ $(this).find(\"sendPrsnTelLno\").text()+ \" \"\n                                        + \" \"+$(this).find(\"recPrsnZipCd\").text() + \" \"+ $(this).find(\"recPrsnAddr\").text() + \" \"+ $(this).find(\"recPrsnDtailAddr\").text() \n                                        + \" \"+ $(this).find(\"recPrsnNm\").text()+ \" \"+ $(this).find(\"recPrsnHTelFno\").text()+ \" \"+ $(this).find(\"recPrsnHTelMno\").text()+ \" \"+ $(this).find(\"recPrsnHTelLno\").text()\n                                        + \" \"+ $(this).find(\"recPrsnTelFno\").text()+ \" \"+ $(this).find(\"recPrsnTelMno\").text()+ \" \"+ $(this).find(\"recPrsnTelLno\").text()\n                                        );\n                                        var dataCollect = $(this).find(\"sendPrsnZipCd\").text() + \"|||\"+ $(this).find(\"sendPrsnAddr\").text() + \"|||\"+ $(this).find(\"sendPrsnDtailAddr\").text() \n                                        + \"|||\"+ $(this).find(\"sendPrsnNm\").text()+ \"|||\"+ $(this).find(\"sendPrsnHTelFno\").text()+ \"|||\"+ $(this).find(\"sendPrsnHTelMno\").text()+ \"|||\"+ $(this).find(\"sendPrsnHTelLno\").text()\n                                        + \"|||\"+ $(this).find(\"sendPrsnTelFno\").text()+ \"|||\"+ $(this).find(\"sendPrsnTelMno\").text()+ \"|||\"+ $(this).find(\"sendPrsnTelLno\").text()+ \"|||\"\n                                        + \"|||\"+$(this).find(\"recPrsnZipCd\").text() + \"|||\"+ $(this).find(\"recPrsnAddr\").text() + \"|||\"+ $(this).find(\"recPrsnDtailAddr\").text() \n                                        + \"|||\"+ $(this).find(\"recPrsnNm\").text()+ \"|||\"+ $(this).find(\"recPrsnHTelFno\").text()+ \"|||\"+ $(this).find(\"recPrsnHTelMno\").text()+ \"|||\"+ $(this).find(\"recPrsnHTelLno\").text()\n                                        + \"|||\"+ $(this).find(\"recPrsnTelFno\").text()+ \"|||\"+ $(this).find(\"recPrsnTelMno\").text()+ \"|||\"+ $(this).find(\"recPrsnTelLno\").text();\n\n                                        localStorage.setItem(\"data\"+cntNum,dataCollect);\n\n                                        htmlStr += \"<tr style='width:100%; border: 1px solid; padding-top:5px; padding-bottom:5px;'>\";\n                                        htmlStr += \"<td style='width:90%; padding-left: 10px; font-size: 20px'>수신인 : \"+$(this).find(\"recPrsnNm\").text() + \"<br>수신인 주소 : \"+ $(this).find(\"recPrsnAddr\").text() +\"<br>\";\n                                        htmlStr += \"<td style='width:10%;'>\"+\"<input type='button' class='checkBtn' value='선택' style='cursor:pointer' onClick='checkUseData(\"+cntNum+\")' />\"+\"</td>\";\n                                        htmlStr += \"</tr><tr></tr>\";\n                                        cntNum++;\n                                    }\n\n                                });\n                                htmlStr += \"</table>\";\n                                localStorage.setItem(\"row\",cntNum);\n                                $(\"#popup_contents\").html(htmlStr);\n                            }\n                            */\n\n                        } else {\n                            console.error('error:', response.statusText);\n                        }\n                    })\n                    .catch(function(error) {\n                        console.error('error:', error);\n                    });\n                // 결제성공시\n                if (response.data.result == 'success') {\n                    this.orderNo = response.data.apiData;\n                } else {\n                    alert(response.data.message);\n                }\n            }).catch(error => {\n                console.log(error);\n            });\n\n            this.$router.push('/addtag');\n        },\n        getPosition(canvasDom, event) {\n            const rect = canvasDom.getBoundingClientRect()\n            return {\n                x: String(event.type).includes('mouse') ? event.clientX - rect.left : event.touches[0].clientX - rect.left,\n                y: String(event.type).includes('mouse') ? event.clientY - rect.top : event.touches[0].clientY - rect.top\n            }\n        },\n        draw() {\n            if (this.isDrawing) {\n                this.canvasPadContext.beginPath()\n                this.canvasPadContext.moveTo(this.previousPosition.x, this.previousPosition.y)\n                this.canvasPadContext.lineTo(this.currentPosition.x, this.currentPosition.y)\n                this.canvasPadContext.strokeStyle = this.localOptions.lineColor\n                this.canvasPadContext.lineWidth = this.localOptions.lineWidth\n                this.canvasPadContext.stroke()\n                this.canvasPadContext.closePath()\n                this.previousPosition = this.currentPosition\n                this.$emit('draw', this.canvasPad)\n            }\n        },\n        onStart(e) {\n            e.preventDefault()\n            this.isDrawing = true\n            this.previousPosition = this.currentPosition\n            this.currentPosition = this.getPosition(this.canvasPad, e)\n        },\n        onEnd(e) {\n            e.preventDefault()\n            this.isDrawing = false\n        },\n        onMove(e) {\n            if (!this.isDrawing) return\n            this.previousPosition = this.currentPosition\n            this.currentPosition = this.getPosition(this.canvasPad, e)\n            this.draw()\n        },\n        clear() {\n            this.canvasPad.width = 995\n            this.$emit('clear')\n        },\n        downloadImage() {\n            // TODO: background color issue\n            const anchor = document.createElement('a')\n            anchor.href = this.canvasPad.toDataURL()\n            anchor.download = this.fileName\n            anchor.click()\n        }\n\n\n    },\n    created() {\n        // Apply default values if need\n        this.localOptions = Object.assign({width: '700px', height: '369px', border: '0px solid black', lineColor: '#000000', lineWidth: 0, functions: {download: false}}, this.options)\n    },\n    mounted() {\n        this.amount = json_log.box_amt;\n\n        this.canvasPad = this.$refs.canvasPad\n        this.canvasPadContext = this.canvasPad.getContext('2d')\n    }\n\n};\n</script>\n\n\n<style>\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}